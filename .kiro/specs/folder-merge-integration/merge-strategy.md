# 병합 전략 문서

## 개요
이 문서는 루트 디렉토리와 `kkc-game-main` 폴더를 병합하기 위한 상세 전략을 정의합니다. 병합의 주요 목표는 멀티플레이어 기능과 고급 게임 시스템을 통합하여 하나의 일관된 프로젝트를 만드는 것입니다.

## 파일별 병합 전략

### 중복 파일 처리

#### 1. hp.js
- **전략**: kkc-game-main/public 버전 사용
- **이유**: 멀티플레이어 환경에서 HP 시스템 동기화 지원
- **작업**:
  - 루트 버전 백업
  - kkc-game-main/public/hp.js를 public/ 폴더로 이동
  - 필요시 루트 버전의 고급 기능 통합

#### 2. index.html
- **전략**: 두 버전 통합
- **이유**: 멀티플레이어 UI와 고급 게임 기능 UI 모두 필요
- **작업**:
  - 두 파일의 구조 비교
  - kkc-game-main/public/index.html을 기반으로 사용
  - 루트 버전의 추가 스크립트 참조 및 UI 요소 통합
  - 스타일 및 레이아웃 충돌 해결

#### 3. main.js
- **전략**: 두 버전 통합
- **이유**: 멀티플레이어 기능과 고급 게임 시스템 모두 필요
- **작업**:
  - kkc-game-main/public/main.js를 기반으로 사용
  - 루트 버전의 고급 게임 시스템 통합
  - 네트워크 동기화 코드 추가
  - 의존성 및 참조 경로 업데이트

#### 4. math.js
- **전략**: 더 완전한 버전 사용
- **이유**: 수학 유틸리티는 일반적으로 충돌이 적음
- **작업**:
  - 두 버전 비교 후 더 완전한 기능을 가진 버전 선택
  - 선택된 버전을 public/ 폴더로 이동

#### 5. object.js
- **전략**: 두 버전 통합
- **이유**: 멀티플레이어 지원과 고급 NPC 기능 모두 필요
- **작업**:
  - kkc-game-main/public/object.js를 기반으로 사용
  - 루트 버전의 고급 NPC AI 및 상호작용 시스템 통합
  - 네트워크 동기화 코드 추가
  - 충돌 감지 및 상호작용 시스템 업데이트

#### 6. player.js
- **전략**: 두 버전 통합
- **이유**: 멀티플레이어 지원과 고급 플레이어 기능 모두 필요
- **작업**:
  - kkc-game-main/public/player.js를 기반으로 사용
  - 루트 버전의 무기 시스템, 공격 시스템, 사운드 기능 통합
  - 네트워크 동기화 코드 추가
  - 플레이어 상태 관리 업데이트

#### 7. commit_message.txt
- **전략**: 최신 버전 사용 또는 병합
- **이유**: 개발 문서로 중요도 낮음
- **작업**:
  - 두 파일 비교 후 최신 정보 유지
  - 필요시 통합된 버전 생성

### 고유 파일 처리

#### 루트 디렉토리 고유 파일
- **전략**: public/ 폴더로 이동
- **작업**:
  - attackSystem.js, effects.js, item.js, map.js, meleeProjectile.js, soundManager.js, ui.js, weapon_system.js를 public/ 폴더로 이동
  - 파일 내 경로 참조 업데이트
  - 멀티플레이어 환경에 맞게 코드 수정

#### kkc-game-main 폴더 고유 파일
- **전략**: 적절한 위치로 이동
- **작업**:
  - server.js를 루트 디렉토리로 이동
  - package.json을 루트 디렉토리로 이동 (기존 의존성 유지)
  - public/main-image.png를 public/ 폴더로 이동

### 리소스 처리
- **전략**: public/ 폴더 하위로 이동
- **작업**:
  - resources/ 폴더를 public/ 하위로 이동
  - 파일 내 리소스 경로 참조 업데이트

## 병합 순서

1. **준비 단계**
   - public/ 폴더 생성
   - 파일 백업 생성

2. **기본 구조 설정**
   - server.js 이동
   - package.json 이동 및 통합
   - npm install 실행

3. **중복 파일 통합**
   - 각 중복 파일에 대해 위에서 정의한 전략에 따라 처리
   - 통합된 파일을 public/ 폴더에 배치

4. **고유 파일 이동**
   - 루트 디렉토리의 고유 파일을 public/ 폴더로 이동
   - kkc-game-main의 고유 파일을 적절한 위치로 이동

5. **리소스 이동**
   - resources/ 폴더를 public/ 하위로 이동
   - 경로 참조 업데이트

6. **네트워크 동기화 구현**
   - 고급 게임 시스템의 네트워크 동기화 코드 추가
   - 플레이어 간 상태 동기화 구현

7. **정리 및 검증**
   - 중복 폴더 제거
   - 불필요한 파일 정리
   - 전체 기능 테스트

## 충돌 해결 가이드라인

1. **코드 충돌**
   - 멀티플레이어 기능 우선 보존
   - 고급 게임 시스템 기능 통합
   - 중복 코드 제거
   - 명확한 주석 추가

2. **경로 참조**
   - 모든 상대 경로를 새 구조에 맞게 업데이트
   - 리소스 경로는 '/resources/'에서 '/public/resources/'로 변경
   - 스크립트 참조는 상대 경로로 통일

3. **의존성 충돌**
   - 최신 버전 선택
   - 호환성 문제 발생 시 테스트 후 결정

## 테스트 계획

1. **기능 테스트**
   - 멀티플레이어 연결 및 동기화 테스트
   - 무기 시스템 작동 테스트
   - 사운드 및 이펙트 테스트
   - NPC 상호작용 테스트

2. **통합 테스트**
   - 전체 게임 플레이 테스트
   - 여러 플레이어 동시 접속 테스트
   - 리소스 로딩 테스트

3. **성능 테스트**
   - 네트워크 지연 테스트
   - 리소스 사용량 모니터링

## 결론

이 병합 전략은 두 게임 버전의 장점을 결합하여 고급 기능을 갖춘 멀티플레이어 게임을 만드는 것을 목표로 합니다. 각 파일에 대한 명확한 전략과 순서적인 접근 방식을 통해 체계적으로 병합을 진행할 것입니다.